<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_05) on Tue Sep 09 12:50:51 EEST 2014 -->
<title>Controller</title>
<meta name="date" content="2014-09-09">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Controller";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Controller.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../thesis/bot/PosUtils.html" title="class in thesis.bot"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?thesis/bot/Controller.html" target="_top">Frames</a></li>
<li><a href="Controller.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">thesis.bot</div>
<h2 title="Class Controller" class="title">Class Controller</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>bwapi.DefaultBWListener</li>
<li>
<ul class="inheritance">
<li>thesis.bot.Controller</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>bwapi.BWEventListener, java.lang.Runnable, java.rmi.Remote, <a href="../../thesis/rmi/RemoteBotInterface.html" title="interface in thesis.rmi">RemoteBotInterface</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">Controller</span>
extends bwapi.DefaultBWListener
implements java.lang.Runnable, <a href="../../thesis/rmi/RemoteBotInterface.html" title="interface in thesis.rmi">RemoteBotInterface</a></pre>
<div class="block">Oskari Leppäaho's master's thesis bot.
 <p>
 Player's own units move guided by potential fields generated by the objects
 in the game such as enemy units and map edges. When in enemy unit range,
 player's units will attack them if their current potential is low enough.
 During the cooldown the units continue to move.
 <p>
 The game will be run in a map that resets the combat scenario after one of
 the teams has lost all of it's units. The map will signal the bot about this
 by setting the minerals to 500 for a moment. The bot will calculate the score
 of the run at that point. (This might not be the best solution. It might be
 possible also to just use game.restartGame() to restart the scenario but
 JNIBWAPI doesn't currently support that and I'm not sure if that option skips
 the menus. Going through the menus takes a lot of time.)
 <p>
 The client runs in its own thread and getRoundScore method runs in another
 thread, polling for the flag that signals the ending of a round.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Oskari Leppäaho</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#BOT_NAME">BOT_NAME</a></strong></code>
<div class="block">The name of the bot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.lang.Thread</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#bwThread">bwThread</a></strong></code>
<div class="block">BroodWar AI runs in this thread.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#DEBUG_INFO">DEBUG_INFO</a></strong></code>
<div class="block">Determines if debug information should be displayed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) bwapi.Game</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#game">game</a></strong></code>
<div class="block">The BroodWar game from BWMirror</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#GAME_SPEED">GAME_SPEED</a></strong></code>
<div class="block">Determines the game speed in frames per second.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) static boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#GUI_ON">GUI_ON</a></strong></code>
<div class="block">Determines if the StarCraft client should draw the game on the screen
 every logical game frame.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#hasBeenAttackOrderGiven">hasBeenAttackOrderGiven</a></strong></code>
<div class="block">Used to avoid giving a move order before the attack has been finished.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#hasBeenRoundEndRegistered">hasBeenRoundEndRegistered</a></strong></code>
<div class="block">If the notification about a round end has been registered (the map used
 should set minerals to 500 to notify about a round end).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#hasEvolutionStarted">hasEvolutionStarted</a></strong></code>
<div class="block">Unused, indicates if the evolution has started (all threads have been
 setup).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#hasMatchStarted">hasMatchStarted</a></strong></code>
<div class="block">Indicates if the StarCraft match has started.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#isAttackInProgress">isAttackInProgress</a></strong></code>
<div class="block">Indicates if the isStartingAttack has already changed to true after a
 unit has been issued an attack command.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#isRoundResultRetrievable">isRoundResultRetrievable</a></strong></code>
<div class="block">Indicates if the round score for the current round has been calculated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#isStepThroughEnabled">isStepThroughEnabled</a></strong></code>
<div class="block">If enabled, the game stops in every frame and only proceeds by pressing
 enter in the command line.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private bwapi.Mirror</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#mirror">mirror</a></strong></code>
<div class="block">The BWMirror.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#MOVE_DISTANCE">MOVE_DISTANCE</a></strong></code>
<div class="block">The maximum distance of the move command from the unit position.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../thesis/bot/PotentialCalculator.html" title="class in thesis.bot">PotentialCalculator</a></code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#potentialCalculator">potentialCalculator</a></strong></code>
<div class="block">Handles potential field calculations</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#score">score</a></strong></code>
<div class="block">Fitness for the last round.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../thesis/bot/Visualizer.html" title="class in thesis.bot">Visualizer</a></code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#visualizer">visualizer</a></strong></code>
<div class="block">Draws the visualizations on the game window</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_thesis.rmi.RemoteBotInterface">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;thesis.rmi.<a href="../../thesis/rmi/RemoteBotInterface.html" title="interface in thesis.rmi">RemoteBotInterface</a></h3>
<code><a href="../../thesis/rmi/RemoteBotInterface.html#SERVICE_NAME">SERVICE_NAME</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../thesis/bot/Controller.html#Controller()">Controller</a></strong>()</code>
<div class="block">Instantiates the JNI-BWAPI interface and connects to BWAPI.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#attackFirstEnemy(bwapi.Unit)">attackFirstEnemy</a></strong>(bwapi.Unit&nbsp;u)</code>
<div class="block">Orders the given unit to attack the first enemy unit that is in its
 ground weapon's range.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#calculateScore()">calculateScore</a></strong>()</code>
<div class="block">Calculates the score for this round.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#checkForRoundEnd()">checkForRoundEnd</a></strong>()</code>
<div class="block">Check if a round has ended.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static int</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#findHighest(double[])">findHighest</a></strong>(double[]&nbsp;array)</code>
<div class="block">Find the index of the highest value in a array of doubles.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) static int</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#findHighestDefaultTo4(double[])">findHighestDefaultTo4</a></strong>(double[]&nbsp;array)</code>
<div class="block">Finds the highest index in an array of doubles.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#finish()">finish</a></strong>()</code>
<div class="block">Finishes running the games.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.List&lt;bwapi.Unit&gt;</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#getEnemyUnitsNoRevealers()">getEnemyUnitsNoRevealers</a></strong>()</code>
<div class="block">Return a list of enemy units.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.List&lt;bwapi.Unit&gt;</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#getMyUnitsNoRevealers()">getMyUnitsNoRevealers</a></strong>()</code>
<div class="block">Return a list of my units.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#getRoundScore()">getRoundScore</a></strong>()</code>
<div class="block">Returns when a single round of fighting has finished.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#getRoundScore(thesis.rmi.PotentialFunctionProvider)">getRoundScore</a></strong>(<a href="../../thesis/rmi/PotentialFunctionProvider.html" title="interface in thesis.rmi">PotentialFunctionProvider</a>&nbsp;potentialProvider)</code>
<div class="block">Returns when a single round of fighting has finished.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#handleUnit(bwapi.Unit)">handleUnit</a></strong>(bwapi.Unit&nbsp;u)</code>
<div class="block">Should be Called in each game cycle for every unit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#isAttacking(bwapi.Unit)">isAttacking</a></strong>(bwapi.Unit&nbsp;u)</code>
<div class="block">Indicates if a unit has been issued an attack command and hasn't finished
 attacking.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">Creates the AI client and gets results from it indefinitely.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) bwapi.Position</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#offsetPosition(bwapi.Position, bwapi.Position, int)">offsetPosition</a></strong>(bwapi.Position&nbsp;position,
              bwapi.Position&nbsp;direction,
              int&nbsp;distance)</code>
<div class="block">Adds direction * distance to position.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#onFrame()">onFrame</a></strong>()</code>
<div class="block">Called each game cycle.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#onStart()">onStart</a></strong>()</code>
<div class="block">Called at the beginning of a game.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.List&lt;bwapi.Unit&gt;</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#removeRevealersFromUnitSet(java.util.List)">removeRevealersFromUnitSet</a></strong>(java.util.List&lt;bwapi.Unit&gt;&nbsp;unitList)</code>
<div class="block">Removes map revealer units from a list of units.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#run()">run</a></strong>()</code>
<div class="block">Starts the bot.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#WaitForConnection()">WaitForConnection</a></strong>()</code>
<div class="block">Waits for StarCraft to be launched and the match to begin.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../thesis/bot/Controller.html#waitForEnterOnConsole()">waitForEnterOnConsole</a></strong>()</code>
<div class="block">Waits for the user to press enter on the console.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_bwapi.DefaultBWListener">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;bwapi.DefaultBWListener</h3>
<code>onEnd, onNukeDetect, onPlayerDropped, onPlayerLeft, onReceiveText, onSaveGame, onSendText, onUnitComplete, onUnitCreate, onUnitDestroy, onUnitDiscover, onUnitEvade, onUnitHide, onUnitMorph, onUnitRenegade, onUnitShow</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="isRoundResultRetrievable">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isRoundResultRetrievable</h4>
<pre>public volatile&nbsp;boolean isRoundResultRetrievable</pre>
<div class="block">Indicates if the round score for the current round has been calculated.</div>
</li>
</ul>
<a name="DEBUG_INFO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEBUG_INFO</h4>
<pre>static final&nbsp;boolean DEBUG_INFO</pre>
<div class="block">Determines if debug information should be displayed. Currently only
 affects printing potential values of the points around an unit on the
 game window.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#thesis.bot.Controller.DEBUG_INFO">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MOVE_DISTANCE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MOVE_DISTANCE</h4>
<pre>static final&nbsp;int MOVE_DISTANCE</pre>
<div class="block">The maximum distance of the move command from the unit position.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#thesis.bot.Controller.MOVE_DISTANCE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GAME_SPEED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GAME_SPEED</h4>
<pre>static final&nbsp;int GAME_SPEED</pre>
<div class="block">Determines the game speed in frames per second.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#thesis.bot.Controller.GAME_SPEED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="BOT_NAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BOT_NAME</h4>
<pre>static final&nbsp;java.lang.String BOT_NAME</pre>
<div class="block">The name of the bot. Will be displayed on the game window when the bot is
 running and in the command window as the bot is started.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#thesis.bot.Controller.BOT_NAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GUI_ON">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GUI_ON</h4>
<pre>static final&nbsp;boolean GUI_ON</pre>
<div class="block">Determines if the StarCraft client should draw the game on the screen
 every logical game frame. Disabling the GUI should speed the game up.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#thesis.bot.Controller.GUI_ON">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="hasBeenRoundEndRegistered">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasBeenRoundEndRegistered</h4>
<pre>boolean hasBeenRoundEndRegistered</pre>
<div class="block">If the notification about a round end has been registered (the map used
 should set minerals to 500 to notify about a round end).</div>
</li>
</ul>
<a name="isAttackInProgress">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAttackInProgress</h4>
<pre>boolean isAttackInProgress</pre>
<div class="block">Indicates if the isStartingAttack has already changed to true after a
 unit has been issued an attack command.</div>
</li>
</ul>
<a name="hasBeenAttackOrderGiven">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasBeenAttackOrderGiven</h4>
<pre>boolean hasBeenAttackOrderGiven</pre>
<div class="block">Used to avoid giving a move order before the attack has been finished.</div>
</li>
</ul>
<a name="isStepThroughEnabled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStepThroughEnabled</h4>
<pre>boolean isStepThroughEnabled</pre>
<div class="block">If enabled, the game stops in every frame and only proceeds by pressing
 enter in the command line.</div>
</li>
</ul>
<a name="bwThread">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bwThread</h4>
<pre>java.lang.Thread bwThread</pre>
<div class="block">BroodWar AI runs in this thread.</div>
</li>
</ul>
<a name="score">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>score</h4>
<pre>int score</pre>
<div class="block">Fitness for the last round. Calculated in <a href="../../thesis/bot/Controller.html#calculateScore()"><code>calculateScore()</code></a>.</div>
</li>
</ul>
<a name="hasEvolutionStarted">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasEvolutionStarted</h4>
<pre>boolean hasEvolutionStarted</pre>
<div class="block">Unused, indicates if the evolution has started (all threads have been
 setup).</div>
</li>
</ul>
<a name="hasMatchStarted">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasMatchStarted</h4>
<pre>boolean hasMatchStarted</pre>
<div class="block">Indicates if the StarCraft match has started.</div>
</li>
</ul>
<a name="visualizer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>visualizer</h4>
<pre>private&nbsp;<a href="../../thesis/bot/Visualizer.html" title="class in thesis.bot">Visualizer</a> visualizer</pre>
<div class="block">Draws the visualizations on the game window</div>
</li>
</ul>
<a name="potentialCalculator">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>potentialCalculator</h4>
<pre>private final&nbsp;<a href="../../thesis/bot/PotentialCalculator.html" title="class in thesis.bot">PotentialCalculator</a> potentialCalculator</pre>
<div class="block">Handles potential field calculations</div>
</li>
</ul>
<a name="mirror">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mirror</h4>
<pre>private&nbsp;bwapi.Mirror mirror</pre>
<div class="block">The BWMirror. Makes communication with BWAPI possible.</div>
</li>
</ul>
<a name="game">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>game</h4>
<pre>bwapi.Game game</pre>
<div class="block">The BroodWar game from BWMirror</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Controller()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Controller</h4>
<pre>public&nbsp;Controller()</pre>
<div class="block">Instantiates the JNI-BWAPI interface and connects to BWAPI.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)
                 throws java.lang.InterruptedException</pre>
<div class="block">Creates the AI client and gets results from it indefinitely.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code> - If interrupted.</dd></dl>
</li>
</ul>
<a name="WaitForConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>WaitForConnection</h4>
<pre>public&nbsp;void&nbsp;WaitForConnection()</pre>
<div class="block">Waits for StarCraft to be launched and the match to begin.</div>
</li>
</ul>
<a name="getRoundScore(thesis.rmi.PotentialFunctionProvider)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRoundScore</h4>
<pre>public&nbsp;int&nbsp;getRoundScore(<a href="../../thesis/rmi/PotentialFunctionProvider.html" title="interface in thesis.rmi">PotentialFunctionProvider</a>&nbsp;potentialProvider)</pre>
<div class="block">Returns when a single round of fighting has finished. <strike>Also starts
 the client if it hasn't been started yet.</strike></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../thesis/rmi/RemoteBotInterface.html#getRoundScore(thesis.rmi.PotentialFunctionProvider)">getRoundScore</a></code>&nbsp;in interface&nbsp;<code><a href="../../thesis/rmi/RemoteBotInterface.html" title="interface in thesis.rmi">RemoteBotInterface</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>potentialProvider</code> - The object that will provide the potential function for this
            round.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Score for the round.</dd></dl>
</li>
</ul>
<a name="getRoundScore()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRoundScore</h4>
<pre>public&nbsp;int&nbsp;getRoundScore()
                  throws java.lang.InterruptedException</pre>
<div class="block">Returns when a single round of fighting has finished. Also starts the
 client if it hasn't been started yet.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Score for the round.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code> - If interrupted.</dd></dl>
</li>
</ul>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Starts the bot.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="finish()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finish</h4>
<pre>public&nbsp;void&nbsp;finish()</pre>
<div class="block">Finishes running the games. Tells the bot to leave the game.</div>
</li>
</ul>
<a name="onStart()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onStart</h4>
<pre>public&nbsp;void&nbsp;onStart()</pre>
<div class="block">Called at the beginning of a game. Sets some options for StarCraft and
 gets the reference to BWMirror Game object. Also creates the visualizer.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>onStart</code>&nbsp;in interface&nbsp;<code>bwapi.BWEventListener</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>onStart</code>&nbsp;in class&nbsp;<code>bwapi.DefaultBWListener</code></dd>
</dl>
</li>
</ul>
<a name="onFrame()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>onFrame</h4>
<pre>public&nbsp;void&nbsp;onFrame()</pre>
<div class="block">Called each game cycle. Handles stepping frame by frame and leaving the
 game when requested. Draws the name of the bot on the screen and
 highlights the units. Then loops AI player's units giving them orders.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>onFrame</code>&nbsp;in interface&nbsp;<code>bwapi.BWEventListener</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code>onFrame</code>&nbsp;in class&nbsp;<code>bwapi.DefaultBWListener</code></dd>
</dl>
</li>
</ul>
<a name="waitForEnterOnConsole()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>waitForEnterOnConsole</h4>
<pre>private&nbsp;void&nbsp;waitForEnterOnConsole()</pre>
<div class="block">Waits for the user to press enter on the console.</div>
</li>
</ul>
<a name="checkForRoundEnd()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkForRoundEnd</h4>
<pre>private&nbsp;void&nbsp;checkForRoundEnd()</pre>
<div class="block">Check if a round has ended. Handle round ending: set and reset
 appropriate flags for the new round and calculate the score. The map
 should signal about an end of round by setting the AI player's minerals
 to 500. At the start of a new round the minerals will be reset to 0.</div>
</li>
</ul>
<a name="calculateScore()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateScore</h4>
<pre>private&nbsp;void&nbsp;calculateScore()</pre>
<div class="block">Calculates the score for this round. The score is calculated by adding
 shields and hit points of remaining friendly units and subtracting the
 shields and hit points of remaining enemy units.</div>
</li>
</ul>
<a name="getMyUnitsNoRevealers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMyUnitsNoRevealers</h4>
<pre>public&nbsp;java.util.List&lt;bwapi.Unit&gt;&nbsp;getMyUnitsNoRevealers()</pre>
<div class="block">Return a list of my units. Ignore map revealers.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A list of my units without map revealers.</dd></dl>
</li>
</ul>
<a name="getEnemyUnitsNoRevealers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEnemyUnitsNoRevealers</h4>
<pre>public&nbsp;java.util.List&lt;bwapi.Unit&gt;&nbsp;getEnemyUnitsNoRevealers()</pre>
<div class="block">Return a list of enemy units. Ignore map revealers.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A list of enemy units without map revealers.</dd></dl>
</li>
</ul>
<a name="removeRevealersFromUnitSet(java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeRevealersFromUnitSet</h4>
<pre>private&nbsp;java.util.List&lt;bwapi.Unit&gt;&nbsp;removeRevealersFromUnitSet(java.util.List&lt;bwapi.Unit&gt;&nbsp;unitList)</pre>
<div class="block">Removes map revealer units from a list of units.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>unitList</code> - Unit list to remove map revealers from.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Unit list with map revealers removed.</dd></dl>
</li>
</ul>
<a name="handleUnit(bwapi.Unit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleUnit</h4>
<pre>private&nbsp;void&nbsp;handleUnit(bwapi.Unit&nbsp;u)</pre>
<div class="block">Should be Called in each game cycle for every unit. Controls the AI
 player's units. If some enemy units are in range and the current
 potential is large enough (the unit is fairly comfortable with its
 current position), the unit will shoot at some enemy unit that is in
 range. Any move orders won't be given before an attack has finished. When
 not attacking, moves the units based on each unit's potential fields.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>u</code> - The unit to be handled.</dd></dl>
</li>
</ul>
<a name="isAttacking(bwapi.Unit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAttacking</h4>
<pre>private&nbsp;boolean&nbsp;isAttacking(bwapi.Unit&nbsp;u)</pre>
<div class="block">Indicates if a unit has been issued an attack command and hasn't finished
 attacking.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>u</code> - Unit to check.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the unit has been issued an attack command and it hasn't
         finished attacking.</dd></dl>
</li>
</ul>
<a name="attackFirstEnemy(bwapi.Unit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>attackFirstEnemy</h4>
<pre>private&nbsp;boolean&nbsp;attackFirstEnemy(bwapi.Unit&nbsp;u)</pre>
<div class="block">Orders the given unit to attack the first enemy unit that is in its
 ground weapon's range.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>u</code> - The unit that will be given the attack order.</dd>
<dt><span class="strong">Returns:</span></dt><dd>If an enemy was found in range and was attacked.</dd></dl>
</li>
</ul>
<a name="offsetPosition(bwapi.Position, bwapi.Position, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>offsetPosition</h4>
<pre>bwapi.Position&nbsp;offsetPosition(bwapi.Position&nbsp;position,
                            bwapi.Position&nbsp;direction,
                            int&nbsp;distance)</pre>
<div class="block">Adds direction * distance to position.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>position</code> - Position to add to.</dd><dd><code>direction</code> - Direction to add. X and Y must be in [-1, 1]</dd><dd><code>distance</code> - Distance to add</dd>
<dt><span class="strong">Returns:</span></dt><dd>Position + direction * distance</dd></dl>
</li>
</ul>
<a name="findHighestDefaultTo4(double[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findHighestDefaultTo4</h4>
<pre>static&nbsp;int&nbsp;findHighestDefaultTo4(double[]&nbsp;array)</pre>
<div class="block">Finds the highest index in an array of doubles. If there are multiple
 highest values and the one in index 4 is one of them, default to index 4.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>array</code> - An array of doubles.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The index of the highest value. Default to index 4.</dd></dl>
</li>
</ul>
<a name="findHighest(double[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>findHighest</h4>
<pre>private static&nbsp;int&nbsp;findHighest(double[]&nbsp;array)</pre>
<div class="block">Find the index of the highest value in a array of doubles.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>array</code> - An array of doubles.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The index of the highest value.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Controller.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../thesis/bot/PosUtils.html" title="class in thesis.bot"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?thesis/bot/Controller.html" target="_top">Frames</a></li>
<li><a href="Controller.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
